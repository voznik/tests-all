"use strict";(self.webpackChunkghv=self.webpackChunkghv||[]).push([[38],{38:(J,f,r)=>{r.r(f),r.d(f,{ReposModule:()=>x});var u=r(9987),v=r(1479),Z=r(2014),d=r(7398),c=r(5605),t=r(5678);let S=(()=>{class n{constructor(e){this.repoPageGQL=e}resolve(e){const[o,s]=this.getUser(e.url);return this.repoPageGQL.fetch({owner:o??void 0,name:s??void 0}).pipe((0,d.U)(a=>({name:s,owner:o,login:a.data?.viewer?.login,branch:a.data?.repository?.defaultBranchRef?.name??"HEAD",path:"",repository:{isPrivate:a.data.repository?.isPrivate,description:a.data.repository?.description,stargazerCount:a.data.repository?.stargazerCount,forkCount:a.data.repository?.forkCount,watcherCount:a.data.repository?.watchers.totalCount,openIssueCount:a.data.repository?.openIssues.totalCount,openPullRequestCount:a.data.repository?.openPullRequests.totalCount,homepageUrl:a.data?.repository?.homepageUrl}})))}getUser(e){return e.map(({path:o})=>o)}static#t=this.\u0275fac=function(o){return new(o||n)(t.LFG(c.o_s))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var R=r(4899),T=r(4664),h=r(6814);let w=(()=>{class n{constructor(){this.owner="",this.name="",this.login="",this.isPrivate=!1,this.watchers=0,this.stargazers=0,this.forks=0,this.issuesCount=0,this.pullsCount=0,this.basePath=""}ngOnInit(){this.basePath=`/repositories/${this.owner}/${this.name}`}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ghv-repo-header"]],inputs:{owner:"owner",name:"name",login:"login",isPrivate:"isPrivate",watchers:"watchers",stargazers:"stargazers",forks:"forks",issuesCount:"issuesCount",pullsCount:"pullsCount"},decls:18,vars:3,consts:[["data-testid","header owner name",1,"ownerLink",3,"routerLink"],[1,"separator"],["data-testid","header repo name","routerLink","./",1,"nameLink"],["role","tablist",1,"nav"],["role","presentation",1,"nav-item"],["id","code","aria-selected","true","type","button",1,"btn","btn-link","nav-link"],["id","issues","aria-selected","true","type","button",1,"btn","btn-link","nav-link","active"],["id","prs","aria-selected","false","type","button",1,"btn","btn-link","nav-link"]],template:function(o,s){1&o&&(t.TgZ(0,"section")(1,"h1")(2,"a",0),t._uU(3),t.qZA(),t.TgZ(4,"span",1),t._uU(5,"/"),t.qZA(),t.TgZ(6,"a",2),t._uU(7),t.qZA()(),t.TgZ(8,"ul",3)(9,"li",4)(10,"button",5),t._uU(11," Code "),t.qZA()(),t.TgZ(12,"li",4)(13,"button",6),t._uU(14," Issues "),t.qZA()(),t.TgZ(15,"li",4)(16,"button",7),t._uU(17," Pull Reqests "),t.qZA()()()()),2&o&&(t.xp6(2),t.Q6J("routerLink",s.owner),t.xp6(1),t.Oqu(s.owner),t.xp6(4),t.Oqu(s.name))},dependencies:[u.rH],styles:["h1[_ngcontent-%COMP%], h1[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:var(--clr-nav-link-color)}"]})}return n})();function P(n,l){if(1&n&&(t.ynx(0),t._UZ(1,"ghv-repo-header",2),t.BQk()),2&n){const e=l.ngIf;t.xp6(1),t.Q6J("owner",e.owner)("name",e.name)("login",e.login)("isPrivate",e.isPrivate)("watchers",e.watchers)("stargazers",e.stargazers)("forks",e.forks)("issuesCount",e.openIssueCount)("pullsCount",e.openPullRequestCount)}}function A(n,l){1&n&&(t.TgZ(0,"span",3),t._uU(1,"Loading..."),t.qZA())}let y=(()=>{class n{constructor(e,o){this.routeConfigService=e,this.repoTreeGQL=o,this.headerStats$=this.routeConfigService.getLeafConfig("repoPageData").pipe((0,T.w)(({owner:s,name:a,login:g,branch:C,repository:p})=>this.repoTreeGQL.watch({owner:s,name:a,expression:`${C}:`}).valueChanges.pipe((0,d.U)(()=>({owner:s,name:a,login:g,isPrivate:p?.isPrivate,stargazers:p?.stargazerCount,forks:p?.forkCount,watchers:p?.watcherCount,openIssueCount:p?.openIssueCount,openPullRequestCount:p?.openPullRequestCount})))))}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(R.o5),t.Y36(c.RkG))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ghv-repo-details"]],decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["repoHeaderSkeleton",""],[3,"owner","name","login","isPrivate","watchers","stargazers","forks","issuesCount","pullsCount"],[1,"spinner"]],template:function(o,s){if(1&o&&(t.ynx(0),t.YNc(1,P,2,9,"ng-container",0),t.ALo(2,"async"),t.YNc(3,A,2,0,"ng-template",null,1,t.W1O),t._UZ(5,"router-outlet"),t.BQk()),2&o){const a=t.MAs(4);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,s.headerStats$))("ngIfElse",a)}},dependencies:[h.O5,u.lC,w,h.Ov],encapsulation:2})}return n})();var L=r(9373),U=r(5619),z=r(9384),D=r(7921),i=r(460);const k=(n,l)=>[n,l];function O(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"clr-dg-row")(1,"clr-dg-cell"),t._uU(2),t.qZA(),t.TgZ(3,"clr-dg-cell")(4,"a",5),t._uU(5),t.qZA()(),t.TgZ(6,"clr-dg-cell"),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"clr-dg-cell")(10,"a",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.showDialog())}),t._uU(11),t.qZA()()()}if(2&n){const e=l.$implicit;t.xp6(2),t.Oqu(null==e?null:e.owner),t.xp6(2),t.Q6J("routerLink",t.WLB(7,k,null==e?null:e.owner,null==e?null:e.name)),t.xp6(1),t.Oqu(null==e?null:e.name),t.xp6(2),t.Oqu(t.lcZ(8,5,null==e?null:e.updatedAt)),t.xp6(4),t.Oqu(null==e?null:e.stargazerCount)}}const Q=()=>[20,50,100];let M=(()=>{class n{constructor(e,o){this.logger=e,this.dialogService=o,this.loading=!1,this.login="",this.page=1,this.total=0,this.pageSize=20,this.pageChange=new t.vpe,this.paginationStateChange=new t.vpe}gridRefresh(e){this.logger.log("gridRefresh",e),this.paginationStateChange.emit(e)}showDialog(){this.dialogService.showDialog({title:"Dialog Title",message:"Dialog Message"})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(R.Yd),t.Y36(Z.KU))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ghv-repo-list"]],inputs:{items:"items",loading:"loading",login:"login",page:"page",total:"total",pageSize:"pageSize"},outputs:{pageChange:"pageChange",paginationStateChange:"paginationStateChange"},decls:18,vars:9,consts:[[2,"height","640px",3,"clrDgLoading","clrDgRefresh"],[4,"ngFor","ngForOf"],[3,"clrDgTotalItems","clrDgPageSize"],["pagination",""],[3,"clrPageSizeOptions"],[3,"routerLink"],["href","javascript:void(0)",3,"click"]],template:function(o,s){if(1&o&&(t.TgZ(0,"clr-datagrid",0),t.NdJ("clrDgRefresh",function(g){return s.gridRefresh(g)}),t.TgZ(1,"clr-dg-detail-header"),t._uU(2,"Top Repositories"),t.qZA(),t.TgZ(3,"clr-dg-column"),t._uU(4,"User ID"),t.qZA(),t.TgZ(5,"clr-dg-column"),t._uU(6,"Name"),t.qZA(),t.TgZ(7,"clr-dg-column"),t._uU(8,"Creation date"),t.qZA(),t.TgZ(9,"clr-dg-column"),t._uU(10,"Stargazer count"),t.qZA(),t.YNc(11,O,12,10,"clr-dg-row",1),t.TgZ(12,"clr-dg-footer")(13,"clr-dg-pagination",2,3)(15,"clr-dg-page-size",4),t._uU(16,"Repos per page"),t.qZA(),t._uU(17),t.qZA()()()),2&o){const a=t.MAs(14);t.Q6J("clrDgLoading",s.loading||!1),t.xp6(11),t.Q6J("ngForOf",s.items),t.xp6(2),t.Q6J("clrDgTotalItems",s.total)("clrDgPageSize",s.pageSize),t.xp6(2),t.Q6J("clrPageSizeOptions",t.DdM(8,Q)),t.xp6(2),t.lnq(" ",a.firstItem+1," - ",a.lastItem+1," of ",a.totalItems," users ")}},dependencies:[h.sg,i.C9t,i.fv_,i.m4W,i.ygj,i.dRQ,i.YYR,i.Ltv,i.Z4N,i.jND,i.KHL,i.PDs,i.Gcc,i.dml,i.Nh1,i.K8c,u.rH,h.uU]})}return n})();var q=r(8091);const F=[{path:"",component:(()=>{class n{constructor(){this.topReposGQL=(0,t.f3M)(c.TIN),this.paginationState$=new U.X({page:{current:1,from:0,to:19,size:20}}),this.pageSize=20,this.total=0,this.loading=!0,this.query$=this.paginationState$.pipe((0,z.G)(),(0,D.O)([{},this.paginationState$.value]),(0,T.w)(([e,o])=>{this.loading=!0;const s=(0,c.MZs)(e,o,this.startCursor,this.endCursor);return this.topReposGQL.watch(s).valueChanges}),(0,d.U)(({data:e,loading:o})=>{this.loading=o;const{startCursor:s,endCursor:a,total:g,items:C}=(n=>{const e=(n.search.edges??[]).reduce((o,s)=>{const a=s?.node;return a&&"Repository"===a.__typename?[...o,{id:a.id,name:a.name,description:a.description,owner:a.owner.login,language:a.primaryLanguage?.name,languageColor:a.primaryLanguage?.color,isPrivate:a.isPrivate,stargazerCount:a.stargazerCount,forkCount:a.forkCount,updatedAt:new Date(a.updatedAt)}]:o},[]);return{startCursor:n.search.pageInfo.startCursor,endCursor:n.search.pageInfo.endCursor,items:e,total:n.search.repositoryCount}})(e);return this.total=g,this.startCursor=s,this.endCursor=a,C}))}paginationStateChange(e){(0,L.ht)(e,this.paginationState$.value)||this.paginationState$.next(e)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ghv-repos"]],decls:2,vars:6,consts:[[3,"loading","items","pageSize","total","paginationStateChange"]],template:function(o,s){1&o&&(t.TgZ(0,"ghv-repo-list",0),t.NdJ("paginationStateChange",function(g){return s.paginationStateChange(g)}),t.ALo(1,"ngrxPush"),t.qZA()),2&o&&t.Q6J("loading",s.loading)("items",t.lcZ(1,4,s.query$))("pageSize",s.pageSize)("total",s.total)},dependencies:[M,q.fM],encapsulation:2})}return n})(),canActivate:[v.dF]},{path:":owner/:repo",component:y,canActivate:[v.dF],resolve:{repoPageData:S},children:[{path:"issues",loadChildren:()=>r.e(728).then(r.bind(r,3728)).then(n=>n.IssuesModule)},{path:"",pathMatch:"full",redirectTo:"issues"}]}];let x=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[Z.W2,u.Bz.forChild(F)]})}return n})()}}]);